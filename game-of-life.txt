;This is the setup procedure
to breishis

make "hours-left 16
make "secs-in-hour 2
change-clock ;;reset the clock
resett

make-energy&happiness-bars

end




to play-game
spawn-creatures
launch [ forever [wait 1 move-char 5] ]
; launch [forever [wait 50 / level spawn_more]]
launch [forever [ask "t1 [wait 1 chase "t2 5] ] ]
launch [ forever [ keep-time ] ]

end



;moves the char in a certain heading a certain distance :speed
to move-char :speed
if key? [
    let [key readchar]
    if (ascii :key) = 28        ;;if left arrow key is pressed
        [seth 270]
    if (ascii :key) = 29        ;;if right arrow key is pressed
            [seth 90]
    if (ascii :key) = 30        ;;if forward key is pressed
        [seth 0]
    if (ascii :key) = 31        ;;if left arrow key is pressed
        [seth 180]
]

fd :speed
end




;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;HELPER FUNCTIONS;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

to spawn-creatures

end


; spawns an intial good turtle which will be cloned
to spawn-initial-good
newturtle "good
setx random 735     ;random from 0-734 which is world size
sety random 427
setsh pick [love exercise money music]      ;pick a shape from 1-4 which represent good things
giveturtle "type
settype "good       ;give the turtle a good type
st
end

; spawns more good turtles
to spawn-more-good
clone "good
setx random 735     ;random from 0-734 which is world size
sety random 427
setsh pick [love exercise money music]      ;pick a shape from 1-4 which represent good things
settype "good       ;give the turtle a good type
st
end

; spawns an intial good turtle which will be cloned
to spawn-initial-bad
newturtle "bad
setx random 735     ;random from 0-734 which is world size
sety random 427
setsh pick [acne carAccident obesity sickness]      ;pick a shape from 1-4 which represent good things
giveturtle "type
settype "bad        ;give the turtle a good type
st
end

; spawns more good turtles
to spawn-more-bad
clone "bad
setx random 735     ;random from 0-734 which is world size
sety random 427
setsh pick [acne carAccident obesity sickness]      ;pick a shape from 1-4 which represent good things
settype "bad        ;give the turtle a good type
st
end



; for finding ascii-key values
to show-ascii
let [key readchar]
    show ascii :key
end



;turtle chases the chasee with speed :speed
to chase :chasee :speed

towards :chasee             ;turn towards the chasee

let [dis distance :chasee]      ; get distance to chasee
ifelse (:speed > :dis)      ; if the turtle is close than speed
    [fd :dis ]              ; then move to the turtle
    [fd :speed]         ;if not, move foward speed

end



;;;;;;;;CLOCK PROCEDURES;;;;;;;;;;;;;;;;;

;Changes the time, and then changes the clock in the world
to keep-time
    wait (:secs-in-hour * 10) 
    make "hours-left (:hours-left - 1)      ;increment time
    change-clock                        ;change clock text

    if (:hours-left = 0) [
        announce [the day is over]
        stopall
    ]
end 


to change-clock
top                         ;move cursoe to top of page
repeat count clock [delete]     ;delete all text
insert (se :hours-left "hours "left ;insert new text
end
;;;;;;;;;;;END CLOCK PROCEDURES ;;;;;;;;;;;;;;;;;;



;;;;;;;;;;;;;;;;ENERGY/HAPPINESS BAR PROCEDURES;;;;;;;;;;;;;;;;;
to make-energy-happiness-bars
newturtle "energy
setx -285
sety 200
setc 85
st
rt 90
setpensize 25
pd
fd 500

newturtle "happy
setx -285
sety 170
setc 45
st 
rt 90
setpensize 25
pd
fd 100

end


to increase-happiness :ammount
ask "happy [
    setc 45
    fd :ammount
]
end


to decrease-happiness :ammount
ask "happy [
    setc 0
    bk :ammount + 1
]
increase-happiness 1
end


to increase-energy :ammount
ask "energy [
    setc 85
    fd :ammount
]
end


to decrease-energy :ammount
ask "energy [
    setc 0
    bk :ammount + 1
]
increase-energy 1
end


;;;;;;;;;;;;;;;;END ENERGY/HAPPINESS BAR PROCEDURES;;;;;;;;;;;;;;;;;
